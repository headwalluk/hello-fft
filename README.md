# Hello FFT

## Overview

`Hello FFT` is a small & fast utility that consumes amplitude data in the time domain from a CSV file, performs a Fast Fourier Transform on the data, then displays the frequency histogram in a graphic window. The user can save the data in an image file (e.g. PNG format) or export the histogram as a CSV.

## Build and Run

### Prerequisites

#### Debian/Ubuntu

On a Debian-based system, install the necessary dependencies:

```bash
sudo apt-get update
sudo apt-get install build-essential cmake libgtkmm-4.0-dev libfftw3-dev libgtest-dev googletest clang
```

#### macOS (Homebrew)

On macOS, you can install the dependencies using [Homebrew](https://brew.sh/):

```bash
brew install cmake gtkmm4 fftw googletest llvm
```

*Note: We recommend using `clang` as the compiler.*

### Compiling

1.  Create a build directory:
    ```bash
    mkdir -p build
    cd build
    ```

2.  Configure the project (forcing Clang):
    ```bash
    CC=clang CXX=clang++ cmake ..
    ```

3.  Build the executable:
    ```bash
    make
    ```

### Running the Application

After building, you can run the main application:

```bash
./src/hello-fft
```

### Running Tests

To run the unit tests:

```bash
./tests/unit_tests
```

### Cleaning Build Artifacts

To clean the build artifacts:

**From the build directory:**
```bash
cd build
make clean
```

**From the project root:**
```bash
cmake --build build --target clean
```

To completely remove all build files and start fresh, simply delete the build directory:
```bash
rm -rf build
```

## Implementation

### Technology Stack

The program is written in **C++17** to ensure modern language features, performance, and type safety.

*   **GUI Framework:** **gtkmm-4.0** (C++ interface for GTK). This was chosen for its mature ecosystem, good performance, and the user's prior experience with GTK. It integrates well with Linux desktop environments.
*   **FFT Library:** **FFTW3** ("Fastest Fourier Transform in the West"). A standard, highly optimized library for computing discrete Fourier transforms.
*   **Build System:** **CMake**. The industry standard for C++ project configuration, facilitating easy dependency management and cross-platform builds.
*   **Testing Framework:** **Google Test (GTest)**. A comprehensive framework for writing C++ unit tests.

### Architecture

The application follows a simplified **Model-View-Controller (MVC)** pattern to separate concerns:

1.  **Model (Core Logic):**
    *   `CsvReader`: Responsible for parsing input files and handling format errors.
    *   `FftProcessor`: Encapsulates the FFTW logic. It takes the time-domain vector and produces frequency-domain magnitude data.
2.  **View (UI):**
    *   `MainWindow`: The top-level application window.
    *   `HistogramWidget`: A custom widget (derived from `Gtk::DrawingArea`) that uses **Cairo** for high-quality 2D rendering of the frequency bars.
3.  **Controller:**
    *   Connects user actions (File Open, Save, Export) to the underlying logic.
    *   Updates the View when new data is processed.

### Data Flow

1.  **Input:** User selects a CSV file via a `Gtk::FileChooserDialog`.
2.  **Processing:**
    *   Raw amplitude data is read into a `std::vector<double>`.
    *   Data is windowed (e.g., Hanning window) to reduce spectral leakage (optional enhancement).
    *   FFT is computed.
    *   Complex output is converted to magnitude ($ \sqrt{re^2 + im^2} $).
3.  **Visualization:** The `HistogramWidget` scales the magnitudes to the window height and draws the bars.
4.  **Output:**
    *   **Image:** Render the Cairo surface to a PNG file.
    *   **CSV:** Write the frequency-bin/magnitude pairs to a text file.

## Testing Strategy

Reliability will be ensured through a combination of automated unit tests and manual verification.

### Unit Testing (GTest)

*   **CSV Parsing:**
    *   Test handling of valid files with varying whitespace.
    *   Test resilience against malformed files (e.g., non-numeric characters, empty lines).
*   **FFT Mathematics:**
    *   **DC Component:** Input a constant non-zero signal; verify energy is concentrated in the 0Hz bin.
    *   **Sine Wave:** Input a pure sine wave at a known frequency; verify the peak appears at the correct frequency bin.
    *   **Linearity:** Verify that $ FFT(A + B) = FFT(A) + FFT(B) $.

### Integration & System Testing

*   **End-to-End Flow:** Load a known dataset, verify the GUI displays the graph, and export data.
*   **Visual Inspection:** Compare the rendered histogram against a reference plot generated by another tool (e.g., Python/Matplotlib) for the same dataset.
*   **Memory Safety:** Use tools like **Valgrind** during development to ensure no memory leaks, especially given the raw pointer usage often required by C interfaces like FFTW.

## Version History

See [CHANGELOG.md](CHANGELOG.md) for details on changes and releases.
